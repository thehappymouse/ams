<script type="text/javascript">
	$(document).ready(function(){
				var G = new AjaxFun();//获取ajax方法
				var data = {ID:"1"};
				var Url = "/ams/manager/GroupList";
				G.GetAjax('post',Url,data,ShowTable);
				//ShowTable();

				$("#Arrears").on("click", "button", function(v){
					
					var id = v.currentTarget.name;
					
					var data = {ID:id};
					var delUrl = "/ams/manager/GroupDel";
					G.GetAjax('post',delUrl,data,ShowTable);
					G.GetAjax('post',Url,data,ShowTable);
			
				})

				function ShowTable(value)
				{
					
					var headarray = Array("序号", "班组", "职责", "操作");
					var model = Array("#", "Name", "TypeName", "Manager");

					var modelcss = Array("text-align:center",  "text-align:center",  "text-align:center", "text-align:center");

					SetArrearsTable(value,headarray,model,modelcss);
					
				}

				//，s数据是填充表格的数据，headarray是表头, modelcss是model的css样式
				function SetArrearsTable(s,headarray,model,modelcss)
				{
					var bodyTpl = "";
					var headmodel = "";
					var money = 0;
					
					var t= 1;
					if (s) {
						for (var i in s) {
							var source = ReplaceArray(s[i]);
							bodyTpl += '<tr style="height:20px">';
								for (var n in model) {
									if (model[n] == "#") {
										bodyTpl +='<td style="'+modelcss[n]+'">'+t+'</td>';
									} else if(model[n] == "Manager"){

										bodyTpl +='<td  style="'+modelcss[n]+'"><button  name="'+source.ID+'" value="'+source.ID+'" class="btn btn-success" style="background-color:#009966;height:20px;padding:1px 12px 2px 12px;">删除</button></td>';
									} else if(model[n] == "Name"){
										bodyTpl += '<td  style="'+modelcss[n]+'">'+source[model[n]]+'</td>';
									} else {
										bodyTpl += '<td style="'+modelcss[n]+'">'+source[model[n]]+'</td>';
									}
									
								}
							t++;
					        bodyTpl +='</tr>';

						}
					}
					


					var headTpl = '<div><table id="info" >'+
					    		'<thead>'+
						    	'<tr >';

			    	for (var i in headarray) {
			    		headmodel +='<th >'+headarray[i]+'</th>';
			    	}
					            

				    
				    var footTpl = '</tr></tbody></table></div>';
				    var tpl = headTpl+headmodel+'</tr></thead><tbody>'+bodyTpl+footTpl;
				    $("#Arrears div").remove();

				    $("#Arrears").append(tpl);

					$("#Arrears table tr:odd").addClass("InfoTr");
					$("#Entry").css("display","block");

				}
	})
</script>
<br />
<div class="line ClientInfo" >班组管理</div>
<div id="Arrears" class="TableCss">
	<div></div>
</div>
<script type="text/javascript">
  $(document).ready(function(){
    var G = new AjaxFun();
      var url = "/ams/manager/GroupBuildAjax";
    

      $("#SubmitButtun").click(function(){
      		
      		if ($("#Team").val() == "") {
                var TeamTpl = "班组名没有填写";
                TeamTpl = '<span style="color:red">'+TeamTpl+'</span>';
                $("#team span").remove();
                $("#team").append(TeamTpl);
                return;
           }
      		
      		var data = $("form").serialize();
          	G.GetAjax('post',url,data, reload);
      })
  })
</script>
<br />

<div class="line ClientInfo" >班组创建</div>
<div style="border:1px solid #009966;height:135px">
	<br />
	<form class="form-horizontal" style="margin-left:-90px">
	  <div class="control-group">
	    <label class="control-label" for="Team">班组名：</label>
	    <div id="team" class="controls">
	      <input name="Team" type="text" style="width:203px;height:23px" id="Team" placeholder="班组名">
	      <span></span>
	    </div>
	  </div>
	  <div class="control-group">
	    
	        <label class="control-label" for="inputPassword">职&nbsp;&nbsp;责：</label>
	          <div class="controls">
	              <select name="Duty" style="width:205px;height:25px">
	                  <option value="1">抄表</option>
	                  <option value="2">收费</option>
	              </select>
	          </div>

	  </div>
	  <div class="control-group">
	        <div class="controls">
	          <button id="SubmitButtun" type="button" class="btn btn-success" style="background-color:#009966">创建班组</button>
	        </div>
	  </div>
	</form>
<br/><br/><br/><br/>
